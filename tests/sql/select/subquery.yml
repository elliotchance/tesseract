tags: subquery select

tests:
  parser_field:
    sql: SELECT (SELECT 1)

  parser_table:
    sql: SELECT * FROM (SELECT 1) AS t

  not_allowed_anonymous_table:
    sql: SELECT * FROM (SELECT 1)
    error: Anonymous table in FROM clause must have alias.

  explain_two_phase_subselect:
    sql: EXPLAIN SELECT * FROM (SELECT 1 + 2) AS t
    result: {
      "default": [
        {"description": "Full table scan of '<t>'"}
      ],
      "t": [
        {"description": "No table used"},
        {"description": "Expressions: 1 + 2"}
      ]
    }

  two_phase_subselect:
    sql: SELECT * FROM (SELECT 1 + 2) AS t
    result:
    - {"col1": 3}

  explain_field_subselect:
    sql: EXPLAIN SELECT (SELECT 2 * 3) + 1
    result: {
      "default": [
        {"description": "No table used"},
        {"description": "Expressions: <0> + 1"}
      ],
      "0": [
        {"description": "No table used"},
        {"description": "Expressions: 2 * 3"}
      ]
    }

  field_subselect:
    sql: SELECT (SELECT 2 * 3) + 1
    result:
    - {"col1": 7}

  explain_multiple_subselects:
    sql: EXPLAIN SELECT (SELECT 2 * 3) + 1, (SELECT 5)
    result: {
      "default": [
        {"description": "No table used"},
        {"description": "Expressions: <0> + 1, <1>"}
      ],
      "0": [
        {"description": "No table used"},
        {"description": "Expressions: 2 * 3"}
      ],
      "1": [
        {"description": "No table used"},
        {"description": "Expressions: 5"}
      ]
    }

  multiple_subselects:
    sql: SELECT (SELECT 2 * 3) + 1, (SELECT 5)
    result:
    - {"col1": 7, "col2": 5}

  # subselect_must_return_one_record
  # explain_not_allowed_in_subselect
  # subselect_does_not_need_as_before_alias
